# FastAPI settings
# Application metadata (sourced from code, not environment)

# Comma-separated list of allowed origins for CORS
CORS_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# Database (SQLAlchemy URL). Default is sqlite+aiosqlite:///./music.db if unset
# DATABASE_URL=sqlite+aiosqlite:///./music.db

# Secret key used to encrypt sensitive data (e.g., refresh tokens)
# Use a 32+ character string or a Fernet key
# SECRET_KEY=

# Spotify OAuth (required only if you want to enable Spotify integration)
# SPOTIFY_CLIENT_ID=
# SPOTIFY_CLIENT_SECRET=
# SPOTIFY_REDIRECT_URI=http://localhost:8000/api/v1/oauth/spotify/callback

# Optional: Direct Spotify Access Token (for cover refresh fallback in dev/testing)
# SPOTIFY_ACCESS_TOKEN=

# YouTube Search settings
# Maximum results to score (default: 8)
# YOUTUBE_SEARCH_LIMIT=8
# Per-variant yt-dlp search timeout in seconds (default: 8). Increase if your network is slow.
# YOUTUBE_SEARCH_TIMEOUT=12
# When set to 1 and the real search yields no results (e.g., due to timeout), return canned fake
# YOUTUBE_SEARCH_DEBUG=1
# results for development instead of an empty list.
# YOUTUBE_SEARCH_FALLBACK_FAKE=0
# If set to 1, when the primary queries return no results, perform one extra search using a
# normalized query that strips punctuation (e.g., "B/AN/K AK STRAIGHT" -> "B AN K AK STRAIGHT").
# YOUTUBE_SEARCH_NORMALIZED_FALLBACK=0
# If set to 1, automatically retry once on yt-dlp timeout with a smaller limit (<=5) and --force-ipv4
# YOUTUBE_SEARCH_RETRY_ON_TIMEOUT=0
# Force deterministic fake results for tests (set to 1 to enable)
# YOUTUBE_SEARCH_FAKE=0

# Downloads / Worker settings
# Disable auto-start of the inâ€‘process download worker (set to 1 in tests)
# DISABLE_DOWNLOAD_WORKER=0

# Where to store downloaded audio files (default: ./library at project root)
# LIBRARY_DIR=./library

# Binaries for yt-dlp and ffmpeg (leave unset if on PATH or installed in venv)
# If your venv is at the project root (one level above this backend folder), examples:
# Windows PowerShell examples:
#   YT_DLP_BIN=..\\venv\\Scripts\\yt-dlp.exe
#   # or if your venv is named .venv
#   YT_DLP_BIN=..\\.venv\\Scripts\\yt-dlp.exe
#   FFMPEG_BIN=C:\\Program Files\\FFmpeg\\bin\\ffmpeg.exe
# If you see errors like "[WinError 2] The system cannot find the file specified" or
# "Executable not found: yt-dlp.exe/ffmpeg.exe", set these variables explicitly.
# YT_DLP_BIN=
# FFMPEG_BIN=

# Preferred audio format for downloads (yt-dlp post-processing). Default: mp3
# PREFERRED_AUDIO_FORMAT=mp3

# Create small placeholder files instead of real downloads (for dev/tests)
# DOWNLOAD_FAKE=0

# Cross-platform tuning (useful on minimal Alpine images where ffmpeg lacks features)
# Disable adding metadata or embedding thumbnail if your ffmpeg build does not support it
# DOWNLOAD_ADD_METADATA=1
# DOWNLOAD_EMBED_THUMBNAIL=1

# yt-dlp cookies and extra args (advanced)
# Use your browser cookies to improve search personalization and region handling
# YT_DLP_COOKIES_FROM_BROWSER=chrome
# Or provide a cookies.txt file (Netscape format)
# YT_DLP_COOKIES_FILE=./cookies.txt
# Pass additional yt-dlp flags (e.g., --force-ipv4 or --proxy http://host:port)
# YT_DLP_EXTRA_ARGS=--force-ipv4
